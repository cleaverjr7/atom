{
  "beforeRunningCommand": "nop",
  "command": "# set up TM_FIRST_LINE containing the first line of the script.\nread first_line\n0<&- # close STDIN\nexport TM_FIRST_LINE=\"$first_line\"\n\nexport PYTHONPATH=\"$TM_BUNDLE_SUPPORT/DocMate\"\nexport PYTHONPATH=\"$TM_SUPPORT_PATH/lib:$PYTHONPATH\"\n\n/usr/bin/env python -S - <<PYTHON\n# coding: UTF-8\nimport sys\nfrom sys import exit\n\nimport tm_helpers\nimport webpreview\nimport docmate\nimport dialog\n\ndocmate.launch_pydoc_server()\n\n# get current dotted word from the env\nword = tm_helpers.current_word(r\"[A-Za-z0-9_\\.]*\")\n\nif not word:\n    print \"<meta http-equiv='Refresh' content='0;URL=%s'>\" % docmate.pydoc_url()[0]\nelse:\n    library_docs = docmate.library_docs(word)\n    local_docs = docmate.local_docs(word)\n    if library_docs:\n        print webpreview.html_header(\"DocMate\", \"Python\")\n        print \"<h3>Python Library Documentation</h3>\\n\"\n        print \"<ol style='list-style-type: lower-alpha;'>\\n\"\n        for n, opt in enumerate(library_docs):\n            desc, url = opt\n            accesskey = chr(ord(\"a\") + n)\n            print '\\t<li><a href=\"%s\" accesskey=\"%s\">%s</a></li>\\n' % (url, accesskey, desc)\n        print \"</ol>\\n\"\n    if local_docs and library_docs:\n        print \"<h3>Pydoc Documentation</h3>\"\n        print \"<ol style='list-style-type: decimal;'>\\n\"\n        for n, opt in enumerate(local_docs):\n            desc, url = opt\n            accesskey = chr(ord(\"1\") + n)\n            print '\\t<li><a href=\"%s\" accesskey=\"%s\">%s</a></li>\\n' % (url, accesskey, desc)\n        print \"</ol>\\n\"\n        print webpreview.html_footer()\n    elif local_docs and not library_docs:\n        print \"<meta http-equiv='Refresh' content='0;URL=%s'>\" % local_docs[0][1]\n    else:\n        print \"<meta http-equiv='Refresh' content='0;URL=%s'>\" % docmate.pydoc_url()[0]\nPYTHON\n",
  "input": "document",
  "keyEquivalent": "^h",
  "name": "Documentation for Current Word",
  "output": "showAsHTML",
  "scope": "source.python"
}
