declare module 'atom' {
  declare class Disposable {
    dispose(): void;
  }

  declare class CompositeDisposable extends Disposable {
    add(disposable: Disposable): void;
  }

  declare class Emitter {
    on(name: string, callback: Function): Disposable;
    emit(name: string, context?: ?Object): void;
  }

  declare var _nodegit: $Exports<'nodegit'>;

  declare class GitRepositoryAsync {
    static Git: typeof _nodegit;
  }
}

import type {Disposable} from 'atom'

declare class Workspace {
  open(uri: string, options?: Object): Promise<void>;
}

declare class CommandRegistry {
  add(target: string | Element, commandName: string | Object, callback?: Function): Disposable;
}

declare class AtomEnvironment {
  workspace: Workspace;
  commands: CommandRegistry;
}

declare var atom: AtomEnvironment;
